---
/**
 * UI：背景
 * 背景のSVGオブジェクトが無限ループで上昇する。
 * ----------------------------------------------
 * position:stickyで背景固定するので、競合cssに気を付ける
 * */
---

<div class="background-container">
  <!-- 背景アニメーション部分 -->
  <div class="background-wrapper">
    <div class="background-sticky">
      <div class="loop-belt loop-belt--front">
        <div class="loop-belt__content">
          <svg viewBox="0 0 1606 1387">
            <defs>
              <linearGradient id="g1">
                <stop offset="0" stop-color="#408efd"></stop>
                <stop offset="1" stop-color="#0a0c45"></stop>
              </linearGradient>
            </defs>
            <path
              fill="url(#g1)"
              d="M439,440s-66,275-90,375c-108-60-217-121-326-181L145,51l294,388Z"></path>
            <path
              fill="url(#g1)"
              d="M1196,929s-274,68-374,94c61,108,123,216,184,325l581-128-391-291Z"></path>
          </svg>
        </div>
        <div class="loop-belt__content">
          <svg viewBox="0 0 1606 1387">
            <defs>
              <linearGradient id="g1-2">
                <stop offset="0" stop-color="#408efd"></stop>
                <stop offset="1" stop-color="#0a0c45"></stop>
              </linearGradient>
            </defs>
            <path
              fill="url(#g1-2)"
              d="M439,440s-66,275-90,375c-108-60-217-121-326-181L145,51l294,388Z"></path>
            <path
              fill="url(#g1-2)"
              d="M1196,929s-274,68-374,94c61,108,123,216,184,325l581-128-391-291Z"></path>
          </svg>
        </div>
      </div>

      <div class="loop-belt loop-belt--back">
        <div class="loop-belt__content">
          <svg viewBox="0 0 1606 1387" preserveAspectRatio="xMidYMid slice">
            <defs>
              <linearGradient id="g2">
                <stop offset="0" stop-color="#408efd"></stop>
                <stop offset="1" stop-color="#0a0c45"></stop>
              </linearGradient>
            </defs>
            <path fill="url(#g2)" d="M753,464s-277,53-379,72c10-124,20-248,30-372L985,35l-232,429Z"
            ></path>
          </svg>
        </div>
        <div class="loop-belt__content">
          <svg viewBox="0 0 1606 1387" preserveAspectRatio="xMidYMid slice">
            <defs>
              <linearGradient id="g2-2">
                <stop offset="0" stop-color="#408efd"></stop>
                <stop offset="1" stop-color="#0a0c45"></stop>
              </linearGradient>
            </defs>
            <path
              fill="url(#g2-2)"
              d="M753,464s-277,53-379,72c10-124,20-248,30-372L985,35l-232,429Z"></path>
          </svg>
        </div>
      </div>
    </div>
  </div>

  <!-- メインコンテンツ -->
  <div class="main-content">
    <slot />
  </div>
</div>

<style>
  .background-container {
    position: relative;
    min-height: 100vh;
  }

  /* 背景ラッパー - 絶対配置で高さゼロ */
  .background-wrapper {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 0;
    width: 100%;
    height: 0; /* 高さゼロ! */
    pointer-events: none;
  }

  /* 背景を固定 - この中でstickyを使う */
  .background-sticky {
    position: sticky;
    top: 0;
    background: #1e1b4b; /* purple-950 */
    width: 100vw;
    height: 100vh;
    overflow: hidden;
  }

  /* アニメーション用のベルト */
  .loop-belt {
    display: flex;
    position: absolute;
    top: 0;
    left: 0;
    flex-direction: column;
    width: 100vw;
    height: 200vh;
  }

  .loop-belt--front {
    z-index: 2;
    animation: loopFront 20s linear infinite;
  }

  .loop-belt--back {
    opacity: 0.5;
    z-index: 1;
    animation: loopBack 35s linear infinite;
  }

  /* 1つ分のコンテンツ単位:100vh */
  .loop-belt__content {
    display: flex;
    flex-shrink: 0;
    justify-content: center;
    align-items: center;
    width: 100vw;
    height: 100vh;
  }

  /* 上昇アニメ */
  @keyframes loopFront {
    0% {
      transform: translateY(0) rotateY(0deg);
    }
    50% {
      transform: translateY(-50vh) rotateY(15deg);
    }
    100% {
      transform: translateY(-100vh) rotateY(0deg);
    }
  }

  @keyframes loopBack {
    0% {
      transform: translateY(0) rotateY(0deg);
    }
    50% {
      transform: translateY(-50vh) rotateY(-10deg);
    }
    100% {
      transform: translateY(-100vh) rotateY(0deg);
    }
  }

  svg {
    width: 100%;
    height: 100%;
    object-fit: cover; /* coverに変更してコンテナいっぱいに */
  }

  .main-content {
    position: relative;
    z-index: 10;
    min-height: 100vh;
  }
</style>
